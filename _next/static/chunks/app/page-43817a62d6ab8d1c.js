(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4530:()=>{},8108:()=>{},18590:()=>{},41234:()=>{},68721:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>x});var a=t(95155),s=t(12115),n=t(90287);function r(e){let{onImageUpload:l}=e,[t,r]=(0,s.useState)(null),o=(0,s.useRef)(null);return(0,a.jsxs)("div",{className:"flex w-full flex-col items-center rounded-lg border-2 border-dashed border-gray-300 bg-white p-6 text-center shadow-sm md:w-2/5",children:[(0,a.jsx)("input",{type:"file",ref:o,onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){let e=new FileReader;e.onloadend=()=>{let t=e.result;r(t),l(t)},e.readAsDataURL(a)}else r(null),l(null)},className:"hidden",accept:"image/png, image/jpeg"}),(0,a.jsx)("div",{className:"mt-4 flex h-48 w-48 items-center justify-center rounded-md bg-gray-100",children:t?(0,a.jsx)("img",{src:t,alt:"Image preview",className:"h-full w-full rounded-md object-cover"}):(0,a.jsx)(n.A,{className:"h-16 w-16 text-gray-400"})}),(0,a.jsx)("button",{onClick:()=>{var e;null==(e=o.current)||e.click()},className:"mt-4 rounded-md bg-blue-500 px-4 py-2 text-sm font-medium text-white hover:bg-blue-600 cursor-pointer",children:"Choose a File"})]})}function o(e){let{similarity:l}=e;if(null===l)return null;let t=l>=.6?"Match":"No-Match",s="Match"===t;return(0,a.jsxs)("div",{className:"mt-12 w-full max-w-md rounded-lg bg-white p-6 text-center shadow-lg animate-fade-in",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Result"}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Similarity Score:"}),(0,a.jsx)("p",{className:"text-4xl font-mono font-bold text-gray-900",children:l.toFixed(4)})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("p",{className:"rounded-full px-6 py-2 text-xl font-bold transition-colors duration-300 ".concat(s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t})})]})}var i=t(63638),d=t(84932);let c=null;async function m(){if(c)return void console.log("Model is already loaded.");try{console.log("Loading ONNX model..."),c=await d.wV.create("/models/facenet.onnx",{executionProviders:["wasm"]}),console.log("ONNX model loaded successfully.")}catch(e){console.error("Failed to load ONNX model:",e)}}async function u(e){if(!c)return console.error("Model not loaded."),null;let l=i.TaL.fromPixels(e).resizeBilinear([160,160]).toFloat().div(i.d_2(255)).expandDims(0),t=new d.qY("float32",l.dataSync(),l.shape),a={[c.inputNames[0]]:t},s=(await c.run(a))[c.outputNames[0]],n=i.OEK(s.data,[...s.dims]);return l.dispose(),n}function x(){let[e,l]=(0,s.useState)(null),[t,n]=(0,s.useState)(null),[i,d]=(0,s.useState)(null),[c,x]=(0,s.useState)(!1),[h,f]=(0,s.useState)(null),[g,p]=(0,s.useState)(!0);(0,s.useEffect)(()=>{!async function(){try{await m(),p(!1)}catch(e){f("Failed to load the AI model. Please refresh the page."),p(!1)}}()},[]);let b=async()=>{if(!e||!t)return void f("Please upload both images before comparing.");x(!0),f(null),d(null);try{let l=document.createElement("img");l.src=e,await new Promise(e=>{l.onload=e});let a=document.createElement("img");a.src=t,await new Promise(e=>{a.onload=e});let s=await u(l),n=await u(a);if(s&&n){let e=function(e,l){let t=e.norm(),a=l.norm(),s=e.dot(l.transpose()),n=s.div(t.mul(a)).dataSync()[0];return e.dispose(),l.dispose(),t.dispose(),a.dispose(),s.dispose(),n}(s,n);d(e)}else f("Could not generate embeddings for the images.")}catch(e){console.error(e),f("An error occurred during the comparison.")}finally{x(!1)}};return g?(0,a.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-24 bg-gray-50",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Loading AI Model..."}),(0,a.jsx)("p",{className:"text-gray-600",children:"This may take a moment."})]}):(0,a.jsxs)("main",{className:"flex min-h-screen flex-col items-center p-12 bg-gray-50",children:[(0,a.jsxs)("div",{className:"w-full max-w-4xl text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"SimFace Demo"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-8",children:"Upload two images to calculate how similar the faces are."}),(0,a.jsxs)("div",{className:"mt-12 flex w-full max-w-4xl flex-col items-center gap-8 md:flex-row md:justify-around",children:[(0,a.jsx)(r,{onImageUpload:l}),(0,a.jsx)(r,{onImageUpload:n})]}),(0,a.jsx)("div",{className:"mt-12"}),(0,a.jsx)("button",{onClick:b,disabled:!e||!t||c,className:"px-8 py-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-300",children:c?"Comparing...":"Compare Faces"})]}),h&&(0,a.jsx)("p",{className:"text-red-500 mt-4",children:h}),null!==i&&(0,a.jsx)(o,{similarity:i})]})}},80551:()=>{},85817:()=>{},88267:(e,l,t)=>{Promise.resolve().then(t.bind(t,68721))}},e=>{e.O(0,[643,690,272,660,56,87,251,674,831,441,255,358],()=>e(e.s=88267)),_N_E=e.O()}]);